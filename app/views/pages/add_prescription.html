<!DOCTYPE html>
<html>
<head>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../assets/stylesheets/main.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="../../assets/javascripts/landing.js" type="text/javascript"></script>

  <script type="text/javascript">
    function handleClick() {
      var careCardNo = $('input[name=care-card-number]').val();
      var medName = $('input[name=mname]').val();
      var interval = $('input[name=p_interval]').val();
      var dosage = $('input[name=p_dosage]').val();
      var myQuery = "INSERT INTO Prescription (cardCardNo, mname, p_dosage, p_interval) " +
      "VALUES (" + careCardNo + ", ‘" + medName + "’, " + dosage + ", " + interval + ")";
      execute(myQuery);

      return false; // prevent further bubbling of event
    }

    function execute(querystring) {
      $.ajax({
          url : "/makequery?q=" + querystring,
          type : "GET",
          async : false,
          dataType: "json",
          success: function(data)  {
            alert("Patient successfully added.");
        }
        })
    }
  </script>

</head>
<body>

<p>Add a prescription for a patient.</p>

<form action="javascript:handleClick()">
  Care Card Number:<br>
  <input type="text" name="care-card-number" value="">
  <br>
  Medication:<br>
  <input type="text" name="mname" value="">
  <br>
  Interval (hours):<br>
  <input type="text" name="p_interval" value="">
  <br>
  Dosage (mg):<br>
  <input type="text" name="p_dosage" value="">
  <br>
  Your Employee ID:<br>
  <input type="text" name="eid" value="">
  <br>
  <br>
  <input type="submit" value="Submit" class="button">
</form>

</body>
</html>
